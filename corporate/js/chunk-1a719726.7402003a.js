(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a719726"],{4013:function(t,e,a){"use strict";var r=a("36ad");e["a"]={reportApps:function(t){return Object(r["a"])().get("/s1/connect/report/app",{params:t})},reportParameters:function(t){return Object(r["a"])().get("/s1/connect/report/".concat(t.reportId,"/parameter"),{params:t})},reportPrice:function(t){return Object(r["a"])().get("/s1/connect/report/".concat(t.reportId,"/price"),{params:t})},runReport:function(t){return Object(r["a"])().post("/s1/connect/report/".concat(t.reportId,"/run"),t)},reportWorkflowInstances:function(t){return Object(r["a"])().get("/s1/connect/report/workflow/instance",{params:t})}}},6198:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.alertActive?a("div",{staticClass:"alert-container"},[a("vs-alert",{staticClass:"mb-5",attrs:{active:t.alertActive,color:t.alertVariant,closable:"","icon-pack":"feather","close-icon":"icon-x"},on:{"update:active":function(e){t.alertActive=e}}},[a("p",[t._v(t._s(t.alertMessage))])])],1):t._e(),a("nv-card",{staticClass:"mb-base vs-con-loading__container",attrs:{id:"params-loading-container"}},[a("h4",{staticClass:"mb-base"},[t.report.iconClass?a("i",{class:[t.report.iconClass,"mr-1"]}):t._e(),t._v(" "+t._s(t.report.reportName))]),t.report.runNotes?a("div",{staticClass:"code-editor p-4 mb-base"},[a("markdown-it-vue",{attrs:{content:t.report.runNotes}})],1):t._e(),t.price.priceId&&!t.priceAccepted?a("div",[a("div",{staticClass:"nv-row"},[a("div",{staticClass:"nv-col w-full"},[a("vs-alert",{staticClass:"mb-4",attrs:{active:"true",color:"warning"}},[a("i",{staticClass:"far fa-exclamation-circle pr-1"}),t._v(" "+t._s(t.$t("REPORT_INCURS_CHARGE"))+" "+t._s(t.price.price)+" "+t._s(t.price.currencyAbbreviation)+".\n          ")]),a("div",{staticClass:"flex justify-between"},[a("vs-button",{staticClass:"px-5 py-3",attrs:{color:"primary",type:"border"},on:{click:t.cancel}},[t._v(t._s(t.$t("CANCEL")))]),a("vs-button",{staticClass:"px-5 py-3",attrs:{color:"primary",type:"filled"},on:{click:function(e){t.priceAccepted=!0}}},[t._v(t._s(t.$t("ACCEPT")))])],1)],1)])]):t._e(),t.price.priceId&&t.priceAccepted?[a("h5",{staticClass:"mb-2"},[t._v(t._s(t.$t("CHARGES")))]),a("div",{staticClass:"mb-base"},[a("div",{staticClass:"nv-row mb-4"},[a("div",{staticClass:"nv-col w-full"},[a("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("DEBIT_ACCOUNT")))]),a("account-lookup",{attrs:{title:t.$t("DEBIT_ACCOUNT"),popupRef:"debitAccountPopup",valueField:"accountNumber",displayField:"accountNumber"},on:{"select-record":t.selectDebitAccountRecord}})],1)])])]:t._e(),t.priceAccepted?[a("h5",{staticClass:"mb-2"},[t._v(t._s(t.$t("PARAMETERS")))]),a("div",{staticClass:"mb-base"},[0===t.inputParameterList.length?a("div",[a("vs-alert",{attrs:{active:"true",color:"primary"}},[a("i",{staticClass:"far fa-check-circle pr-1"}),t._v(" "+t._s(t.$t("NO_PARAMETERS"))+"\n          ")])],1):t._e(),t._l(t.inputParameterList,function(e,r){return["RPT_PARAM_TYPE_CONTEXT"!==e.parameterTypeEnumId?a("div",{key:r,staticClass:"nv-row mb-4"},[a("div",{staticClass:"nv-col w-full",class:"Y"===e.mandatory?"required":""},[a("label",{staticClass:"vs-input--label"},[t._v(t._s(e.displayName))]),"RPT_PARAM_TYPE_ACCT"===e.parameterTypeEnumId?[a("account-lookup",{attrs:{title:e.displayName,lookupTag:r,valueField:"accountNumber",displayField:"accountNumber"},on:{"select-record":t.selectAccountRecord}})]:"RPT_PARAM_TYPE_NUMBER"===e.parameterTypeEnumId?[a("vs-input",{staticClass:"w-full",attrs:{type:"number"},model:{value:e.parameterValue,callback:function(a){t.$set(e,"parameterValue",a)},expression:"parameter.parameterValue"}})]:"RPT_PARAM_TYPE_DATE"===e.parameterTypeEnumId?[a("nv-input-group",[a("template",{slot:"append"},[a("div",{staticClass:"append-text bg-dark"},[a("i",{staticClass:"far fa-calendar-alt"})])]),a("datepicker",{staticClass:"w-full",attrs:{placeholder:t.$t("SELECT_DATE"),format:t.dateFormat},model:{value:e.parameterValue,callback:function(a){t.$set(e,"parameterValue",a)},expression:"parameter.parameterValue"}})],2)]:[a("vs-input",{staticClass:"w-full",model:{value:e.parameterValue,callback:function(a){t.$set(e,"parameterValue",a)},expression:"parameter.parameterValue"}})]],2)]):t._e()]})],2),a("div",{staticClass:"nv-row"},[a("div",{staticClass:"nv-col w-full"},[a("div",{staticClass:"flex justify-between"},[a("vs-button",{staticClass:"px-5 py-3",attrs:{color:"primary",type:"border"},on:{click:t.cancel}},[t._v(t._s(t.$t("CANCEL")))]),a("vs-button",{staticClass:"px-5 py-3",attrs:{color:"primary",type:"filled",disabled:t.resultTableBusy},on:{click:t.run}},[t._v(t._s(t.$t("SUBMIT")))])],1)])])]:t._e()],2),t.resultTableVisible?[a("nv-card",{staticClass:"vs-con-loading__container",attrs:{id:"result-loading-container"}},[a("vs-table",{attrs:{data:t.resultTableData,noDataText:t.resultTableNoDataText,search:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return t._l(r,function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},t._l(t.outputParameterList,function(e,n){return a("vs-td",{key:n},["RPT_PARAM_TYPE_NUMBER"===e.parameterTypeEnumId?[t._v("\n                "+t._s(t._f("placeholder")(t._f("currency")(r[s][e.parameterName],""),"-"))+"\n              ")]:"RPT_PARAM_TYPE_DATE"===e.parameterTypeEnumId?[t._v("\n                "+t._s(t._f("placeholder")(t._f("formatUnixDate")(r[s][e.parameterName]),"-"))+"\n              ")]:[t._v("\n                "+t._s(t._f("placeholder")(r[s][e.parameterName],"-"))+"\n              ")]],2)}),1)})}}],null,!1,2414382520)},[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex flex-wrap-reverse items-center"},[a("vs-button",{staticClass:"p-3 mr-4",attrs:{type:"filled",icon:"fa-file-excel","icon-pack":"fal"},on:{click:function(e){return t.exportXls(t.resultTableData,t.columnDefs)}}},[t._v(t._s(t.$t("EXPORT_XLS")))]),a("vs-button",{staticClass:"p-3 mr-4",attrs:{type:"filled",icon:"fa-file-csv","icon-pack":"fal"},on:{click:function(e){return t.exportCsv(t.resultTableData,t.columnDefs)}}},[t._v(t._s(t.$t("EXPORT_CSV")))])],1),a("div",{staticClass:"flex justify-end mr-4"},[a("div",{staticClass:"p-2 border border-solid border-grey-light rounded-full d-theme-dark-bg flex items-center justify-between font-medium"},[a("span",{staticClass:"mx-2"},[t._v(t._s(t.resultTablePagingInfo))])])])]),a("template",{slot:"thead"},t._l(t.outputParameterList,function(e,r){return a("vs-th",{key:r,attrs:{"sort-key":e.parameterName}},[t._v("\n            "+t._s(e.displayName)+"\n          ")])}),1)],2)],1)]:t._e()],2)},s=[],n=a("a34a"),i=a.n(n),o=a("946b"),c=a("5f4f"),l=a("b664"),u=a("93b8"),p=a("e387"),d=a("4013"),m=a("fa33"),f=a("48cd"),b=a.n(f);function v(t,e,a,r,s,n,i){try{var o=t[n](i),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(r,s)}function _(t){return function(){var e=this,a=arguments;return new Promise(function(r,s){var n=t.apply(e,a);function i(t){v(n,r,s,i,o,"next",t)}function o(t){v(n,r,s,i,o,"throw",t)}i(void 0)})}}var T={name:"report-run",mixins:[o["a"],c["a"],l["a"],u["a"]],components:{Datepicker:m["a"],AccountLookup:p["a"],MarkdownItVue:b.a},data:function(){return{reportId:this.$route.params.id,report:{},price:{},priceAccepted:!1,debitAccountNumber:null,inputParameterList:[],outputParameterList:[],resultTableData:[],resultTableContainer:"result-loading-container",resultTableBusy:!1,resultTableTotalRows:0,resultTableCurrentPage:1,resultTablePerPage:10,resultTableVisible:!1}},computed:{resultTableNoDataText:function(){return this.resultTableBusy?this.$t("LOADING")+" ...":this.$t("NO_DATA_FOUND")},resultTablePagingInfo:function(){return this.pagingInfo(this.resultTableCurrentPage,this.resultTablePerPage,this.resultTableTotalRows)},columnDefs:function(){for(var t=this,e=[],a=0;a<this.outputParameterList.length;a++){var r={headerName:t.outputParameterList[a].displayName,field:t.outputParameterList[a].parameterName};"RPT_PARAM_TYPE_DATE"===this.outputParameterList[a].parameterTypeEnumId?r.format="Date":"RPT_PARAM_TYPE_NUMBER"===this.outputParameterList[a].parameterTypeEnumId?r.format="Number":"RPT_PARAM_TYPE_DECIMAL"===this.outputParameterList[a].parameterTypeEnumId&&(r.format="Decimal"),e.push(r)}return e}},methods:{load:function(){var t=_(i.a.mark(function t(){var e;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,e.startLoading("params-loading-container"),d["a"].reportApps({reportId:this.reportId}).then(function(t){e.report=t.data.reportAppList[0]||{}}).catch(function(t){e.showDangerAlert(t.response.data.errors)}),d["a"].reportParameters({reportId:this.reportId,parameterDirectionEnumId:"RPT_PARAM_DIR_IN",disabled:"N",pageNoLimit:!0}).then(function(t){e.inputParameterList=t.data.reportParameterList||[]}),d["a"].reportPrice({reportId:this.reportId}).then(function(t){e.price=t.data||{},e.priceAccepted=!e.price.priceId||0===e.price.price}),d["a"].reportParameters({reportId:this.reportId,parameterDirectionEnumId:"RPT_PARAM_DIR_OUT",disabled:"N",pageNoLimit:!0}).then(function(t){e.outputParameterList=t.data.reportParameterList||[],e.stopLoading("params-loading-container")});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),selectDebitAccountRecord:function(t){this.debitAccountNumber=t.accountNumber},selectAccountRecord:function(t,e){this.inputParameterList[e].parameterValue=t.accountNumber},run:function(){for(var t=[],e=0;e<this.inputParameterList.length;e++)t.push({parameterId:this.inputParameterList[e].parameterId,parameterValue:this.inputParameterList[e].parameterValue});var a=this;this.resultTableBusy=!0,a.startLoading("params-loading-container"),this.startLoading(this.resultTableContainer),d["a"].runReport({reportId:this.reportId,debitAccountNumber:this.debitAccountNumber,parameters:JSON.stringify(t)}).then(function(t){a.stopLoading("params-loading-container"),a.stopLoading(a.resultTableContainer),a.resultTableBusy=!1,t.data.inlineDataList?(a.resultTableData=t.data.inlineDataList||[],a.resultTableTotalRows=a.resultTableData.length,a.resultTablePerPage=a.resultTableData.length,a.resultTableVisible=!0):t.data.instanceId&&a.showSuccessAlert(t.data.messages)}).catch(function(t){a.stopLoading("params-loading-container"),a.stopLoading(a.resultTableContainer),a.resultTableBusy=!1,a.showDangerAlert(t.response.data.errors)})},cancel:function(){this.$router.back()}},mounted:function(){this.load()}},h=T,P=a("2877"),C=Object(P["a"])(h,r,s,!1,null,null,null);e["default"]=C.exports}}]);
//# sourceMappingURL=chunk-1a719726.7402003a.js.map