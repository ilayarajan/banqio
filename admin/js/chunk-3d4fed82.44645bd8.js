(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d4fed82"],{6723:function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t.alertActive?e("div",{staticClass:"alert-container"},[e("vs-alert",{staticClass:"mb-5",attrs:{active:t.alertActive,color:t.alertVariant,closable:"","icon-pack":"feather","close-icon":"icon-x"},on:{"update:active":function(n){t.alertActive=n}}},[e("p",[t._v(t._s(t.alertMessage))])])],1):t._e(),e("nv-card",[e("div",{staticClass:"flex flex-wrap-reverse items-center mb-base"},[e("vs-button",{staticClass:"p-3 mr-4",attrs:{color:"primary",type:"filled",icon:"fa-chevron-left","icon-pack":"far"},on:{click:t.cancel}},[t._v(t._s(t.$t("BACK")))]),t.$acl.check("isNucleusAll")?e("vs-button",{staticClass:"p-3 mr-4",attrs:{color:"primary",type:"filled",icon:"fa-pen","icon-pack":"far"},on:{click:t.modify}},[t._v(t._s(t.$t("MODIFY")))]):t._e()],1),e("div",{staticClass:"vs-row flex hover mb-base"},[e("div",{staticClass:"nv-col sm:w-1/2 w-full p-2"},[e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("ID"))+":")]),e("span",[t._v(t._s(t.communicationEvent.communicationEventId))])]),e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("COMMUNICATION_TYPE"))+":")]),e("span",[t._v(t._s(t.communicationEvent.communicationEventTypeDescription))])]),t.communicationEvent.contactMechTypeDescription?e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("CONTACT_TYPE"))+":")]),e("span",[t._v(t._s(t.communicationEvent.contactMechTypeDescription))])]):t._e(),t.communicationEvent.statusDescription?e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("STATUS"))+":")]),e("span",[t._v(t._s(t.communicationEvent.statusDescription))])]):t._e(),t.communicationEvent.reasonDescription?e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("REASON"))+":")]),e("span",[t._v(t._s(t.communicationEvent.reasonDescription))])]):t._e(),e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("ENTRY_DATE"))+":")]),e("span",[t._v(t._s(t._f("formatUnixDate")(t.communicationEvent.entryDate)))])])]),e("div",{staticClass:"nv-col sm:w-1/2 w-full p-2"},[t.communicationEvent.fromPartyId?e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("FROM_PARTY"))+":")]),e("span",[e("router-link",{attrs:{to:{name:"ViewParty",params:{id:t.communicationEvent.fromPartyId}}}},[t._v(t._s(t.communicationEvent.fromPartyName))])],1)]):t._e(),t.communicationEvent.toPartyId?e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("TO_PARTY"))+":")]),e("span",[e("router-link",{attrs:{to:{name:"ViewParty",params:{id:t.communicationEvent.toPartyId}}}},[t._v(t._s(t.communicationEvent.toPartyName))])],1)]):t._e(),t.communicationEvent.datetimeStarted?e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("START_DATE"))+":")]),e("span",[t._v(t._s(t._f("formatUnixDate")(t.communicationEvent.datetimeStarted)))])]):t._e(),t.communicationEvent.datetimeEnded?e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("END_DATE"))+":")]),e("span",[t._v(t._s(t._f("formatUnixDate")(t.communicationEvent.datetimeEnded)))])]):t._e(),t.communicationEvent.subject?e("p",{staticClass:"info-row"},[e("span",[t._v(t._s(t.$t("SUBJECT"))+":")]),e("span",[t._v(t._s(t.communicationEvent.subject))])]):t._e()])]),t.communicationEvent.body||t.communicationEvent.note?e("vs-collapse",{staticClass:"mb-base",attrs:{type:"border"}},[t.communicationEvent.body?e("vs-collapse-item",[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n          "+t._s(t.$t("BODY"))+"\n        ")]),e("div",{staticClass:"text-italic"},[t._v("\n          "+t._s(t.communicationEvent.body)+"\n        ")])]):t._e(),t.communicationEvent.note?e("vs-collapse-item",[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n          "+t._s(t.$t("NOTES"))+"\n        ")]),e("div",{staticClass:"text-italic"},[t._v("\n          "+t._s(t.communicationEvent.note)+"\n        ")])]):t._e()],1):t._e(),e("vs-tabs",[e("vs-tab",{attrs:{label:t.$t("CONTENT")}},[e("communication-event-content",{attrs:{communicationEventId:t.communicationEventId},on:{"show-alert":t.showAlert}})],1)],1)],1)],1)},o=[],i=e("a34a"),s=e.n(i),c=e("946b"),r=e("a84d"),l=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"vs-con-loading__container",attrs:{id:"loading-container"}},[t.contentFormVisible?e("div",{staticClass:"inline-form p-4 mb-base"},[e("div",{staticClass:"nv-row mb-4"},[e("div",{staticClass:"nv-col sm:w-1/2 w-full required"},[e("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("FILE")))]),e("nv-input-group",{staticClass:"bg-white"},[e("template",{slot:"append"},[e("div",{staticClass:"append-text bg-dark"},[e("i",{staticClass:"far fa-folder"})])]),e("input",{ref:"file",staticClass:"vs-inputx vs-input--input normal",attrs:{type:"file",id:"file"},on:{change:function(n){return t.handleFileUpload()}}})],2)],1),e("div",{staticClass:"nv-col sm:w-1/2 w-full required"},[e("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("CONTENT_TYPE")))]),e("vs-select",{staticClass:"nv-col sm:w w-full",attrs:{autocomplete:""},model:{value:t.contentTypeEnumId,callback:function(n){t.contentTypeEnumId=n},expression:"contentTypeEnumId"}},t._l(t.contentTypes,function(t,n){return e("vs-select-item",{key:n,staticClass:"w-full",attrs:{value:t.enumId,text:t.description}})}),1)],1)]),e("div",{staticClass:"nv-row mb-4"},[e("div",{staticClass:"nv-col w-full"},[e("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("DESCRIPTION")))]),e("vs-textarea",{staticClass:"w-full",model:{value:t.contentDescription,callback:function(n){t.contentDescription=n},expression:"contentDescription"}})],1)]),e("div",{staticClass:"nv-row"},[e("div",{staticClass:"nv-col sm:w-1/2 w-full"},[e("div",{staticClass:"flex justify-left"},[e("vs-button",{staticClass:"px-5 py-3 mr-2",attrs:{color:"primary",type:"filled"},on:{click:t.createEventContent}},[t._v(t._s(t.$t("SUBMIT")))]),e("vs-button",{staticClass:"px-5 py-3 mr-2",attrs:{color:"primary",type:"border"},on:{click:t.hideContentForm}},[t._v(t._s(t.$t("CANCEL")))])],1)])])]):t._e(),e("vs-table",{staticClass:"mb-base",attrs:{data:t.contentTableData,noDataText:t.contentTableNoDataText,sst:!0,search:""},on:{search:t.filterContentTable,sort:t.orderContentTable},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.data;return t._l(a,function(n,o){return e("vs-tr",{key:o,attrs:{data:n}},[e("vs-td",{attrs:{data:a[o].contentTypeDescription}},[e("span",[t._v(t._s(a[o].contentTypeDescription))]),e("a",{staticClass:"ml-2",attrs:{href:t.contentDownloadUrl(a[o])}},[e("i",{staticClass:"far fa-cloud-download-alt text-primary"})])]),e("vs-td",{attrs:{data:a[o].description}},[t._v("\n          "+t._s(t._f("placeholder")(a[o].description,"-"))+"\n        ")]),e("vs-td",{attrs:{data:a[o].inputUserFullName}},[t._v("\n          "+t._s(a[o].inputUserFullName)+"\n        ")]),e("vs-td",{attrs:{data:a[o].contentDate}},[t._v("\n          "+t._s(t._f("formatUnixDate")(a[o].contentDate))+"\n        ")])],1)})}}])},[e("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"flex flex-wrap-reverse items-center"},[e("vs-button",{staticClass:"p-3 mr-4",attrs:{disabled:t.contentFormVisible,color:"primary",type:"filled",icon:"fa-plus","icon-pack":"far"},on:{click:t.showContentForm}},[t._v(t._s(t.$t("ADD")))]),e("vs-button",{staticClass:"p-3 mr-4",attrs:{type:"filled",icon:"fa-sync","icon-pack":"far",disabled:t.contentTableBusy},on:{click:t.refreshContentTable}},[t._v(t._s(t.$t("REFRESH")))])],1),e("div",{staticClass:"flex justify-end mr-4"},[e("div",{staticClass:"p-2 border border-solid border-grey-light rounded-full d-theme-dark-bg flex items-center justify-between font-medium"},[e("span",{staticClass:"mx-2"},[t._v(t._s(t.contentTablePagingInfo))]),e("vs-dropdown",{staticClass:"cursor-pointer mr-2",attrs:{"vs-trigger-click":""}},[e("span",{staticClass:"far fa-angle-down text-primary"}),e("vs-dropdown-menu",t._l(t.tablePageOptions,function(n,a){return e("vs-dropdown-item",{key:a,on:{click:function(e){t.contentTablePerPage=n}}},[e("span",[t._v(t._s(n))])])}),1)],1)],1)])]),e("template",{slot:"thead"},[e("vs-th",{attrs:{"sort-key":"contentTypeDescription"}},[t._v("\n        "+t._s(this.$t("CONTENT_TYPE"))+"\n      ")]),e("vs-th",{attrs:{"sort-key":"description"}},[t._v("\n        "+t._s(this.$t("DESCRIPTION"))+"\n      ")]),e("vs-th",{attrs:{"sort-key":"inputUserFullName"}},[t._v("\n        "+t._s(this.$t("INPUT_BY"))+"\n      ")]),e("vs-th",{attrs:{"sort-key":"contentDate"}},[t._v("\n        "+t._s(this.$t("CREATION_DATE"))+"\n      ")])],1)],2),e("vs-pagination",{attrs:{total:t.contentTableTotalPages,max:t.maxPaginationItems},model:{value:t.contentTableCurrentPage,callback:function(n){t.contentTableCurrentPage=n},expression:"contentTableCurrentPage"}})],1)},u=[],m=e("93b8"),v=e("b664"),d=e("a601");function p(t,n,e,a,o,i,s){try{var c=t[i](s),r=c.value}catch(l){return void e(l)}c.done?n(r):Promise.resolve(r).then(a,o)}function f(t){return function(){var n=this,e=arguments;return new Promise(function(a,o){var i=t.apply(n,e);function s(t){p(i,a,o,s,c,"next",t)}function c(t){p(i,a,o,s,c,"throw",t)}s(void 0)})}}var h={name:"communication-event-content",mixins:[m["a"],v["a"]],props:{communicationEventId:{type:String,required:!0}},data:function(){return{contentTableData:[],contentTableFilter:null,contentTableFilterTimer:null,contentTableOrderBy:null,contentTableContainer:"loading-container",contentTableBusy:!1,contentTableTotalRows:0,contentTableCurrentPage:1,contentTablePerPage:10,contentFormVisible:!1,contentDescription:"",contentFile:null,contentTypes:[],contentTypeEnumId:"CmctAttachment"}},computed:{contentTableNoDataText:function(){return this.contentTableBusy?this.$t("LOADING")+" ...":this.$t("NO_DATA_FOUND")},contentTableTotalPages:function(){return Math.ceil(this.contentTableTotalRows/this.contentTablePerPage)},contentTablePagingInfo:function(){return this.pagingInfo(this.contentTableCurrentPage,this.contentTablePerPage,this.contentTableTotalRows)}},methods:{load:function(){var t=f(s.a.mark(function t(){var n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=this,d["a"].enumerations({enumTypeId:"CommunicationContentType",orderByField:"sequenceNum,description",pageNoLimit:!0}).then(function(t){n.contentTypes=t.data.enumerationList||[]});case 2:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),loadContentTableData:function(t){var n=this;return this.contentTableBusy=!0,this.contentTableContainer=t||this.contentTableContainer,this.startLoading(this.contentTableContainer),r["a"].communicationEventContents({pageIndex:this.contentTableCurrentPage-1,pageSize:this.contentTablePerPage,filter:this.contentTableFilter,orderByField:this.contentTableOrderBy,communicationEventId:this.communicationEventId}).then(function(t){n.stopLoading(n.contentTableContainer),n.contentTableBusy=!1,n.contentTableTotalRows=t.data.totalRows,n.contentTableData=t.data.contentList||[]})},refreshContentTable:function(){this.loadContentTableData()},filterContentTable:function(t){var n=this;this.contentTableFilter!==t?(clearTimeout(this.contentTableFilterTimer),this.contentTableFilterTimer=setTimeout(function(){n.contentTableFilter=t,n.loadContentTableData()},"750")):clearTimeout(this.contentTableFilterTimer)},orderContentTable:function(t,n){this.contentTableOrderBy=(n?"":"-")+t,this.loadContentTableData()},handleFileUpload:function(){this.contentFile=this.$refs.file.files[0]},contentDownloadUrl:function(t){var n="",e=this.$store.getters.appId;return"".concat(n,"/apps/Banqio/DownloadSecure/downloadCommunicationEventContent?sourceAppId=").concat(e,"&communicationEventId=").concat(t.communicationEventId,"&communicationEventContentId=").concat(t.communicationEventContentId)},showContentForm:function(){this.contentFormVisible=!0},hideContentForm:function(){this.contentFormVisible=!1},createEventContent:function(){var t=this,n=new FormData;n.append("communicationEventId",this.$route.params.id),n.append("contentTypeEnumId",this.contentTypeEnumId),n.append("contentFile",this.contentFile),n.append("description",this.contentDescription),r["a"].createCommunicationEventContent({communicationEventId:this.$route.params.id,formData:n}).then(function(n){200===n.status&&(t.refreshContentTable(),t.hideContentForm())}).catch(function(n){t.$emit("show-alert","danger",n.response.data.errors)})}},watch:{contentTableCurrentPage:function(){this.loadContentTableData()},contentTablePerPage:function(){this.loadContentTableData()}},mounted:function(){this.load(),this.loadContentTableData()}},_=h,b=e("2877"),T=Object(b["a"])(_,l,u,!1,null,null,null),C=T.exports;function E(t,n,e,a,o,i,s){try{var c=t[i](s),r=c.value}catch(l){return void e(l)}c.done?n(r):Promise.resolve(r).then(a,o)}function w(t){return function(){var n=this,e=arguments;return new Promise(function(a,o){var i=t.apply(n,e);function s(t){E(i,a,o,s,c,"next",t)}function c(t){E(i,a,o,s,c,"throw",t)}s(void 0)})}}var y={name:"communication-event-view",mixins:[c["a"]],components:{CommunicationEventContent:C},data:function(){return{communicationEventId:this.$route.params.id,communicationEvent:{}}},methods:{load:function(){var t=w(s.a.mark(function t(){var n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=this,r["a"].communicationEvents({communicationEventId:this.communicationEventId}).then(function(t){n.communicationEvent=t.data.eventList[0]||{}});case 2:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),cancel:function(){this.$router.back()},modify:function(){this.$router.push({name:"ModifyCommunicationEvent",params:{id:this.$route.params.id}})}},mounted:function(){this.load()}},g=y,D=Object(b["a"])(g,a,o,!1,null,null,null);n["default"]=D.exports},"946b":function(t,n,e){"use strict";var a={data:function(){return{alertActive:!1,alertMessage:this.$t("UNKNOWN_ERROR"),alertVariant:"danger"}},methods:{showAlert:function(t,n){this.alertMessage=n||this.$t("UNKNOWN_ERROR"),this.alertVariant=t,this.alertActive=!0},showSuccessAlert:function(t){this.showAlert("success",t)},showDangerAlert:function(t){this.showAlert("danger",t)},showWarningAlert:function(t){this.showAlert("warning",t)},showInfoAlert:function(t){this.showAlert("info",t)}}};n["a"]=a},a601:function(t,n,e){"use strict";var a=e("36ad");n["a"]={enumerations:function(t){return Object(a["a"])().get("/s1/commons/basic/enumeration",{params:t})}}},a84d:function(t,n,e){"use strict";var a=e("36ad");n["a"]={communicationEvents:function(t){return Object(a["a"])().get("/s1/nucleus/communicationEvent",{params:t})},createCommunicationEvent:function(t){return Object(a["a"])().post("/s1/nucleus/communicationEvent",t)},modifyCommunicationEvent:function(t){return Object(a["a"])().patch("/s1/nucleus/communicationEvent/",t)},communicationEventTypes:function(t){return Object(a["a"])().get("/s1/nucleus/communicationEvent/type",{params:t})},communicationEventContents:function(t){return Object(a["a"])().get("/s1/nucleus/communicationEvent/".concat(t.communicationEventId,"/content"),{params:t})},createCommunicationEventContent:function(t){return Object(a["a"])().post("/s1/nucleus/communicationEvent/".concat(t.communicationEventId,"/content"),t.formData,{headers:{"Content-Type":"multipart/form-data"}})}}}}]);
//# sourceMappingURL=chunk-3d4fed82.44645bd8.js.map