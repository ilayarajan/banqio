(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bfb83954"],{"31b2":function(t,e,i){"use strict";var a=i("19e6"),s=i("9a2e"),r=i("93b8"),o=i("b664"),n={mixins:[s["a"],r["a"],o["a"]],props:{defaultUserGroupTableFilter:{class:String,default:null},defaultUserGroupTableOrderBy:{type:String,default:null}},data:function(){return{userGroupData:[],userGroupTableData:[],userGroupTableFilterTimer:null,userGroupTableFilter:this.defaultUserGroupTableFilter,userGroupTableOrderBy:this.defaultUserGroupTableOrderBy,userGroupTableContainer:"loading-container",userGroupTableBusy:!1,userGroupTableTotalRows:0,userGroupTableCurrentPage:1,userGroupTablePerPage:10}},computed:{userGroupTableNoDataText:function(){return this.userGroupTableBusy?this.$t("LOADING")+" ...":this.$t("NO_DATA_FOUND")},userGroupTableTotalPages:function(){return Math.ceil(this.userGroupTableTotalRows/this.userGroupTablePerPage)},userGroupTablePagingInfo:function(){return this.pagingInfo(this.userGroupTableCurrentPage,this.userGroupTablePerPage,this.userGroupTableTotalRows)}},methods:{loadUserGroupTableData:function(t){var e=this;this.userGroupTableBusy=!0,this.userGroupTableContainer=t||this.userGroupTableContainer,this.startLoading(this.userGroupTableContainer),a["a"].userGroups({pageIndex:this.userGroupTableCurrentPage-1,pageSize:this.userGroupTablePerPage,filter:this.userGroupTableFilter,orderByField:this.userGroupTableOrderBy}).then(function(t){e.stopLoading(e.userGroupTableContainer),e.userGroupTableBusy=!1,e.userGroupTableTotalRows=t.data.totalRows,e.userGroupTableData=t.data.userGroupList||[]}).catch(function(t){e.stopLoading(e.userGroupTableContainer),e.userGroupTableBusy=!1,e.$emit("show-alert","danger",t.response.data.errors)})},refreshUserGroupTable:function(){this.loadUserGroupTableData()},filterUserGroupTable:function(t){var e=this;this.userGroupTableFilter!==t?(clearTimeout(this.userGroupTableFilterTimer),this.userGroupTableFilterTimer=setTimeout(function(){e.userGroupTableFilter=t,e.loadUserGroupTableData()},"750")):clearTimeout(this.userGroupTableFilterTimer)},orderUserGroupTable:function(t,e){this.userGroupTableOrderBy=(e?"":"-")+t,this.loadUserGroupTableData()}},watch:{userGroupTableCurrentPage:function(){this.refreshUserGroupTable()},userGroupTablePerPage:function(){this.refreshUserGroupTable()}}};e["a"]=n},"3c84":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("user-group-popup",{attrs:{title:t.title,popupRef:t.popupRef,active:t.popupActive,defaultUserGroupTableFilter:t.defaultTableFilter},on:{"select-row":t.selectRow,close:function(e){t.popupActive=!1}}}),i("vue-simple-suggest",{ref:t.suggestRef,attrs:{list:t.getList,debounce:200,"nullable-select":!0,"value-attribute":t.valueField,"display-attribute":t.displayField},on:{select:t.selectSuggestion},scopedSlots:t._u([{key:"misc-item-above",fn:function(e){var a=e.suggestions,s=e.query;return[i("div",{staticClass:"misc-item"},[i("span",[t._v(t._s(t.$t("SEARCHING_FOR"))+" '"+t._s(s)+"'.")])]),a.length>0?[i("div",{staticClass:"misc-item"},[i("span",[t._v(t._s(a.length)+" "+t._s(t.$t("RESULTS_FOUND"))+" ...")])]),i("hr")]:t.loading?t._e():i("div",{staticClass:"misc-item"},[i("span",[t._v(t._s(t.$t("NO_RESULTS_FOUND")))])])]}},{key:"suggestion-item",fn:function(e){return i("div",{attrs:{title:e.suggestion.description}},[i("div",{staticClass:"text"},[i("span",{domProps:{innerHTML:t._s(t.boldenSuggestion(e))}})])])}},{key:"misc-item-below",fn:function(e){var a=e.suggestions;return t.loading?i("div",{staticClass:"misc-item"},[i("span",[t._v(t._s(t.$t("LOADING"))+" ...")]),t._v("\n      "+t._s(a)+"\n    ")]):t._e()}}],null,!0),model:{value:t.mutableRecordDisplay,callback:function(e){t.mutableRecordDisplay=e},expression:"mutableRecordDisplay"}},[i("div",{staticClass:"g"},[i("nv-input-group",[i("vs-input",{staticClass:"w-full lookup-input",model:{value:t.mutableRecordDisplay,callback:function(e){t.mutableRecordDisplay=e},expression:"mutableRecordDisplay"}}),i("template",{slot:"append"},[i("div",{staticClass:"append-text btn-addon"},[i("vs-button",{attrs:{disabled:!t.mutableRecordDisplay,color:"primary"},on:{click:t.clear}},[i("i",{staticClass:"far fa-eraser"})]),i("vs-button",{attrs:{color:"primary"},on:{click:function(e){t.popupActive=!0}}},[i("i",{staticClass:"far fa-search"})])],1)])],2)],1)])],1)},s=[],r=i("e229"),o=i.n(r),n=i("d5c2"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vs-popup",{attrs:{fullscreen:"",title:t.title,active:t.activeInternal},on:{"update:active":function(e){t.activeInternal=e}}},[i("div",{ref:t.popupRef,staticClass:"vs-con-loading__container"},[i("vs-table",{staticClass:"mb-base",attrs:{data:t.userGroupTableData,noDataText:t.userGroupTableNoDataText,sst:!0,search:""},on:{search:t.filterUserGroupTable,sort:t.orderUserGroupTable,selected:t.selectRow},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,function(e,s){return i("vs-tr",{key:s,attrs:{data:e}},[i("vs-td",{attrs:{data:a[s].userGroupId}},[t._v("\n            "+t._s(a[s].userGroupId)+"\n          ")]),i("vs-td",{attrs:{data:a[s].description}},[i("span",{class:t.disabledClass(a[s])},[t._v(t._s(a[s].description))])])],1)})}}])},[i("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"flex flex-wrap-reverse items-center"},[i("vs-button",{staticClass:"p-3 mr-4",attrs:{type:"filled",icon:"fa-sync","icon-pack":"far",disabled:t.userGroupTableBusy},on:{click:function(e){return t.loadUserGroupTableData(t.popupRef)}}},[t._v(t._s(t.$t("REFRESH")))])],1),i("div",{staticClass:"flex justify-end mr-4"},[i("div",{staticClass:"p-2 border border-solid border-grey-light rounded-full d-theme-dark-bg flex items-center justify-between font-medium"},[i("span",{staticClass:"mx-2"},[t._v(t._s(t.userGroupTablePagingInfo))]),i("vs-dropdown",{staticClass:"cursor-pointer mr-2",attrs:{"vs-trigger-click":""}},[i("span",{staticClass:"far fa-angle-down text-primary"}),i("vs-dropdown-menu",t._l(t.tablePageOptions,function(e,a){return i("vs-dropdown-item",{key:a,on:{click:function(i){t.userGroupTablePerPage=e}}},[i("span",[t._v(t._s(e))])])}),1)],1)],1)])]),i("template",{slot:"thead"},[i("vs-th",{attrs:{"sort-key":"userGroupId"}},[t._v("\n          "+t._s(this.$t("ID"))+"\n        ")]),i("vs-th",{attrs:{"sort-key":"description"}},[t._v("\n          "+t._s(this.$t("GROUP_NAME"))+"\n        ")])],1)],2),i("vs-pagination",{attrs:{total:t.userGroupTableTotalPages,max:t.maxPaginationItems},model:{value:t.userGroupTableCurrentPage,callback:function(e){t.userGroupTableCurrentPage=e},expression:"userGroupTableCurrentPage"}})],1)])},u=[],c=i("89b6"),p=i("31b2"),f={name:"user-group-popup",mixins:[c["a"],p["a"]],mounted:function(){this.loadUserGroupTableData(this.popupRef)},beforeDestroy:function(){this.$el.remove()}},d=f,h=i("2877"),v=Object(h["a"])(d,l,u,!1,null,null,null),b=v.exports,m=i("19e6"),g={name:"user-group-lookup",mixins:[n["a"]],components:{VueSimpleSuggest:o.a,UserGroupPopup:b},methods:{getList:function(t){var e=this;return e.loading=!0,new Promise(function(i,a){return m["a"].userGroups({pageIndex:0,pageSize:10,orderByField:"description",filter:t}).then(function(t){e.loading=!1;var a=t.data.userGroupList||[];i(a)}).catch(function(t){e.loading=!1,a(t)})})}}},w=g,T=Object(h["a"])(w,a,s,!1,null,null,null);e["a"]=T.exports},"7cf1":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.alertActive?i("div",{staticClass:"alert-container"},[i("vs-alert",{staticClass:"mb-5",attrs:{active:t.alertActive,color:t.alertVariant,closable:"","icon-pack":"feather","close-icon":"icon-x"},on:{"update:active":function(e){t.alertActive=e}}},[i("p",[t._v(t._s(t.alertMessage))])])],1):t._e(),i("nv-card",[i("div",{staticClass:"flex flex-wrap-reverse items-center mb-base"},[i("vs-button",{staticClass:"p-3 mr-4",attrs:{color:"primary",type:"filled",icon:"fa-chevron-left","icon-pack":"far"},on:{click:t.cancel}},[t._v(t._s(t.$t("BACK")))]),t.$acl.check("isNucleusAll")?i("vs-button",{staticClass:"p-3 mr-4",attrs:{color:"primary",type:"filled",icon:"fa-pen","icon-pack":"far"},on:{click:t.modify}},[t._v(t._s(t.$t("MODIFY")))]):t._e(),t.$acl.check("isNucleusAll")&&"N"===t.workflow.approved?i("vs-button",{staticClass:"p-3 mr-4",attrs:{color:"primary",type:"filled",icon:"fa-stamp","icon-pack":"far"},on:{click:t.approve}},[t._v(t._s(t.$t("APPROVE")))]):t._e(),t.$acl.check("isNucleusAll")?i("vs-button",{staticClass:"p-3 mr-4",attrs:{color:"primary",type:"filled",icon:"fa-clone","icon-pack":"far"},on:{click:t.duplicate}},[t._v(t._s(t.$t("DUPLICATE")))]):t._e(),i("vs-button",{staticClass:"p-3 mr-4",attrs:{color:"primary",type:"filled",icon:"fa-pencil-ruler","icon-pack":"far"},on:{click:t.designer}},[t._v(t._s(t.$t("DESIGNER")))])],1),i("div",{staticClass:"vs-row flex hover mb-base"},[i("div",{staticClass:"nv-col sm:w-1/2 w-full p-2"},[i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("ID"))+": ")]),i("span",[t._v(t._s(t.workflow.workflowId))])]),i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("WORKFLOW_NAME"))+": ")]),i("span",{class:t.disabledClass(t.workflow)},[t._v(t._s(t.workflow.workflowName))])]),i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("WORKFLOW_TYPE"))+": ")]),i("span",[t._v(t._s(t.workflow.workflowTypeName))])]),i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("STATUS_FLOW"))+": ")]),i("span",[t._v(t._s(t.workflow.statusFlowDescription))])]),t.workflow.description?i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("DESCRIPTION"))+": ")]),i("span",[t._v(t._s(t.workflow.description))])]):t._e(),i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("REMINDER_INTERVAL"))+": ")]),i("span",[t._v(t._s(t.workflow.reminderInterval)+" "+t._s(t.workflow.reminderIntervalDescription))])]),i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("REMINDER_LIMIT"))+": ")]),i("span",[t._v(t._s(t.workflow.reminderLimit))])])]),i("div",{staticClass:"nv-col sm:w-1/2 w-full p-2"},[i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("INPUT_BY"))+": ")]),i("span",[t._v(t._s(t.workflow.inputUserFullName))])]),t.workflow.updateUserFullName?i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("UPDATED_BY"))+": ")]),i("span",[t._v(t._s(t.workflow.updateUserFullName))])]):t._e(),i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("CREATION_DATE"))+": ")]),i("span",[t._v(t._s(t._f("formatUnixDate")(t.workflow.creationDate)))])]),i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("APPROVED"))+":")]),i("span",[t._v(t._s(t._f("prettyBool")(t.workflow.approved)))])]),i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("APPROVED_BY"))+":")]),i("span",[t._v(t._s(t._f("placeholder")(t.workflow.approvedBy,"-")))])]),i("p",{staticClass:"info-row"},[i("span",[t._v(t._s(t.$t("APPROVAL_DATE"))+":")]),i("span",[t._v(t._s(t._f("formatUnixTimestamp")(t.workflow.approvalDate)))])])])]),i("vs-tabs",[i("vs-tab",{attrs:{label:t.$t("INITIATORS")}},[i("workflow-initiator",{attrs:{workflowId:t.workflowId},on:{"show-alert":t.showAlert}})],1),i("vs-tab",{attrs:{label:t.$t("VARIABLES")}},[i("workflow-variable",{attrs:{workflowId:t.workflowId},on:{"show-alert":t.showAlert}})],1)],1)],1)],1)},s=[],r=i("a34a"),o=i.n(r),n=i("946b"),l=i("9a2e"),u=i("b664"),c=i("9ff0"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vs-con-loading__container",attrs:{id:"initiator-loading-container"}},[t.initiatorFormVisible?i("div",{staticClass:"inline-form p-4 mb-base"},[i("div",{staticClass:"nv-row mb-4"},[i("div",{staticClass:"nv-col sm:w w-full"},[i("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("USER_GROUP")))]),i("user-group-lookup",{attrs:{title:t.$t("USER_GROUP"),valueField:"initiatorId",displayField:"description"},on:{"select-record":t.selectUserGroupRecord}})],1)]),i("div",{staticClass:"nv-row mb-4"},[i("div",{staticClass:"nv-col sm:w-1/2 w-full"},[i("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("FROM_DATE")))]),i("nv-input-group",[i("template",{slot:"append"},[i("div",{staticClass:"append-text bg-dark"},[i("i",{staticClass:"far fa-calendar-alt"})])]),i("datepicker",{staticClass:"w-full",attrs:{placeholder:t.$t("SELECT_DATE"),format:t.dateFormat},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],2)],1),i("div",{staticClass:"nv-col sm:w-1/2 w-full"},[i("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("TO_DATE")))]),i("nv-input-group",[i("template",{slot:"append"},[i("div",{staticClass:"append-text bg-dark"},[i("i",{staticClass:"far fa-calendar-alt"})])]),i("datepicker",{staticClass:"w-full",attrs:{placeholder:t.$t("SELECT_DATE"),format:t.dateFormat},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],2)],1)]),i("div",{staticClass:"nv-row"},[i("div",{staticClass:"nv-col sm:w-1/2 w-full"},[i("div",{staticClass:"flex justify-left"},[i("vs-button",{staticClass:"px-5 py-3 mr-2",attrs:{color:"primary",type:"filled"},on:{click:t.createInitiator}},[t._v(t._s(t.$t("SUBMIT")))]),i("vs-button",{staticClass:"px-5 py-3 mr-2",attrs:{color:"primary",type:"border"},on:{click:t.hideInitiatorForm}},[t._v(t._s(t.$t("CANCEL")))])],1)])])]):t._e(),i("vs-table",{staticClass:"mb-base",attrs:{data:t.initiatorTableData,noDataText:t.initiatorTableNoDataText,sst:!0,search:""},on:{search:t.filterInitiatorTable,sort:t.orderInitiatorTable},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,function(e,s){return i("vs-tr",{key:s,attrs:{data:e}},[i("vs-td",{attrs:{data:a[s].userGroupId}},[i("router-link",{attrs:{to:{name:"ViewUserGroup",params:{id:a[s].userGroupId}}}},[t._v(t._s(a[s].userGroupId))])],1),i("vs-td",{attrs:{data:a[s].userGroupDescription}},[t._v("\n          "+t._s(a[s].userGroupDescription)+"\n        ")]),i("vs-td",{attrs:{data:a[s].fromDate}},[t._v("\n          "+t._s(t._f("formatUnixDate")(a[s].fromDate))+"\n        ")]),i("vs-td",{attrs:{data:a[s].toDate}},[t._v("\n          "+t._s(t._f("formatUnixDate")(a[s].toDate))+"\n        ")]),i("vs-td",[i("div",{staticClass:"flex"},[i("vs-button",{staticClass:"p-3 mr-4",attrs:{color:"danger",disabled:t.initiatorExpired(a[s]),"icon-pack":"far",icon:"fa-trash-alt"},on:{click:function(e){return t.expireInitiator(a[s].initiatorId)}}},[t._v(t._s(t.$t("DELETE")))])],1)])],1)})}}])},[i("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"flex flex-wrap-reverse items-center"},[i("vs-button",{staticClass:"p-3 mr-4",attrs:{disabled:t.initiatorFormVisible,color:"primary",type:"filled",icon:"fa-plus","icon-pack":"far"},on:{click:t.showInitiatorForm}},[t._v(t._s(t.$t("ADD")))]),i("vs-button",{staticClass:"p-3 mr-4",attrs:{type:"filled",icon:"fa-sync","icon-pack":"far",disabled:t.initiatorTableBusy},on:{click:t.refreshInitiatorTable}},[t._v(t._s(t.$t("REFRESH")))])],1),i("div",{staticClass:"flex justify-end mr-4"},[i("div",{staticClass:"p-2 border border-solid border-grey-light rounded-full d-theme-dark-bg flex items-center justify-between font-medium"},[i("span",{staticClass:"mx-2"},[t._v(t._s(t.initiatorTablePagingInfo))]),i("vs-dropdown",{staticClass:"cursor-pointer mr-2",attrs:{"vs-trigger-click":""}},[i("span",{staticClass:"far fa-angle-down text-primary"}),i("vs-dropdown-menu",t._l(t.tablePageOptions,function(e,a){return i("vs-dropdown-item",{key:a,on:{click:function(i){t.initiatorTablePerPage=e}}},[i("span",[t._v(t._s(e))])])}),1)],1)],1)])]),i("template",{slot:"thead"},[i("vs-th",{attrs:{"sort-key":"initiatorId"}},[t._v("\n        "+t._s(this.$t("ID"))+"\n      ")]),i("vs-th",{attrs:{"sort-key":"initiatorDescription"}},[t._v("\n        "+t._s(this.$t("USER_GROUP"))+"\n      ")]),i("vs-th",{attrs:{"sort-key":"fromDate"}},[t._v("\n        "+t._s(this.$t("FROM_DATE"))+"\n      ")]),i("vs-th",{attrs:{"sort-key":"toDate"}},[t._v("\n        "+t._s(this.$t("TO_DATE"))+"\n      ")]),i("vs-th",[t._v("\n        "+t._s(this.$t("OPTIONS"))+"\n      ")])],1)],2),i("vs-pagination",{attrs:{total:t.initiatorTableTotalPages,max:t.maxPaginationItems},model:{value:t.initiatorTableCurrentPage,callback:function(e){t.initiatorTableCurrentPage=e},expression:"initiatorTableCurrentPage"}})],1)},f=[],d=i("5f4f"),h=i("93b8"),v=i("3c84"),b=i("fa33"),m={name:"workflow-initiator",mixins:[d["a"],h["a"],u["a"]],components:{UserGroupLookup:v["a"],Datepicker:b["a"]},props:{workflowId:{type:String,required:!0}},data:function(){return{initiatorTableData:[],initiatorTableFilter:null,initiatorTableFilterTimer:null,initiatorTableOrderBy:null,initiatorTableContainer:"initiator-loading-container",initiatorTableBusy:!1,initiatorTableTotalRows:0,initiatorTableCurrentPage:1,initiatorTablePerPage:10,initiatorFormVisible:!1,userGroupId:"",fromDate:null,toDate:null}},computed:{initiatorTableNoDataText:function(){return this.initiatorTableBusy?this.$t("LOADING")+" ...":this.$t("NO_DATA_FOUND")},initiatorTableTotalPages:function(){return Math.ceil(this.initiatorTableTotalRows/this.initiatorTablePerPage)},initiatorTablePagingInfo:function(){return this.pagingInfo(this.initiatorTableCurrentPage,this.initiatorTablePerPage,this.initiatorTableTotalRows)}},methods:{loadInitiatorTableData:function(t){var e=this;this.initiatorTableBusy=!0,this.initiatorTableContainer=t||this.initiatorTableContainer,this.startLoading(this.initiatorTableContainer),c["a"].workflowInitiators({pageIndex:this.initiatorTableCurrentPage-1,pageSize:this.initiatorTablePerPage,filter:this.initiatorTableFilter,orderByField:this.initiatorTableOrderBy,workflowId:this.workflowId}).then(function(t){e.stopLoading(e.initiatorTableContainer),e.initiatorTableTotalRows=t.data.totalRows,e.initiatorTableData=t.data.workflowInitiatorList||[],e.initiatorTableBusy=!1})},refreshInitiatorTable:function(){this.loadInitiatorTableData()},filterInitiatorTable:function(t){var e=this;this.initiatorTableFilter!==t?(clearTimeout(this.initiatorTableFilterTimer),this.initiatorTableFilterTimer=setTimeout(function(){e.initiatorTableFilter=t,e.loadInitiatorTableData()},"750")):clearTimeout(this.initiatorTableFilterTimer)},orderInitiatorTable:function(t,e){this.initiatorTableOrderBy=(e?"":"-")+t,this.loadInitiatorTableData()},showInitiatorForm:function(){this.initiatorFormVisible=!0},hideInitiatorForm:function(){this.initiatorFormVisible=!1},createInitiator:function(){var t=this;c["a"].createWorkflowInitiator({workflowId:this.workflowId,userGroupId:this.userGroupId,fromDate:this.getTime(this.fromDate),toDate:this.getTime(this.toDate)}).then(function(e){t.refreshInitiatorTable(),t.hideInitiatorForm()}).catch(function(e){t.$emit("show-alert","danger",e.response.data.errors)})},expireInitiator:function(t){var e=this;c["a"].expireWorkflowInitiator({workflowId:this.workflowId,initiatorId:t}).then(function(t){e.refreshInitiatorTable()})},selectUserGroupRecord:function(t){this.userGroupId=t.userGroupId||""},initiatorExpired:function(t){return!!t.toDate&&t.toDate<Date.now()}},mounted:function(){this.loadInitiatorTableData()},watch:{initiatorTableCurrentPage:function(){this.loadInitiatorTableData()},initiatorTablePerPage:function(){this.loadInitiatorTableData()}}},g=m,w=i("2877"),T=Object(w["a"])(g,p,f,!1,null,null,null),y=T.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vs-con-loading__container",attrs:{id:"variable-loading-container"}},[t.variableFormVisible?i("div",{staticClass:"inline-form p-4 mb-base"},[i("div",{staticClass:"nv-row mb-4"},[i("div",{staticClass:"nv-col sm:w-1/2 w-full required"},[i("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("VARIABLE_NAME")))]),i("vs-input",{staticClass:"w-full",model:{value:t.variableName,callback:function(e){t.variableName=e},expression:"variableName"}})],1),i("div",{staticClass:"nv-col sm:w-1/2 w-full required"},[i("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("VARIABLE_TYPE")))]),i("vs-select",{staticClass:"w-full",attrs:{autocomplete:"",placeholder:t.$t("SELECT_VALUE")},model:{value:t.variableTypeEnumId,callback:function(e){t.variableTypeEnumId=e},expression:"variableTypeEnumId"}},t._l(t.variableTypes,function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.enumId,text:t.description}})}),1)],1)]),i("div",{staticClass:"nv-row mb-4"},[i("div",{staticClass:"nv-col w-full"},[i("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("DEFAULT_VALUE")))]),"WF_VAR_TEXT"===t.variableTypeEnumId?i("vs-input",{staticClass:"w-full",model:{value:t.defaultValue,callback:function(e){t.defaultValue=e},expression:"defaultValue"}}):t._e(),"WF_VAR_NUMBER"===t.variableTypeEnumId?i("vs-input",{staticClass:"w-full",attrs:{type:"number"},model:{value:t.defaultValue,callback:function(e){t.defaultValue=e},expression:"defaultValue"}}):t._e(),"WF_VAR_DATE"===t.variableTypeEnumId?i("nv-input-group",[i("template",{slot:"append"},[i("div",{staticClass:"append-text bg-dark"},[i("i",{staticClass:"far fa-calendar-alt"})])]),i("datepicker",{staticClass:"w-full",attrs:{placeholder:t.$t("SELECT_DATE"),format:t.dateFormat},model:{value:t.defaultValue,callback:function(e){t.defaultValue=e},expression:"defaultValue"}})],2):t._e(),"WF_VAR_BOOLEAN"===t.variableTypeEnumId?i("vs-switch",{staticClass:"mt-2",model:{value:t.defaultValue,callback:function(e){t.defaultValue=e},expression:"defaultValue"}}):t._e()],1)]),i("div",{staticClass:"nv-row"},[i("div",{staticClass:"nv-col sm:w-1/2 w-full"},[i("div",{staticClass:"flex justify-left"},[i("vs-button",{staticClass:"px-5 py-3 mr-2",attrs:{color:"primary",type:"filled"},on:{click:t.createWorkflowVariable}},[t._v(t._s(t.$t("SUBMIT")))]),i("vs-button",{staticClass:"px-5 py-3 mr-2",attrs:{color:"primary",type:"border"},on:{click:t.hideVariableForm}},[t._v(t._s(t.$t("CANCEL")))])],1)])])]):t._e(),i("vs-table",{staticClass:"mb-base",attrs:{data:t.variableTableData,noDataText:t.variableTableNoDataText,sst:!0,search:""},on:{search:t.filterVariableTable,sort:t.orderVariableTable},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,function(e,s){return i("vs-tr",{key:s,attrs:{data:e}},[i("vs-td",{attrs:{data:a[s].variableName}},[t._v("\n          "+t._s(a[s].variableName)+"\n        ")]),i("vs-td",{attrs:{data:a[s].variableTypeDescription}},[t._v("\n          "+t._s(t._f("placeholder")(a[s].variableTypeDescription,"-"))+"\n        ")]),i("vs-td",{attrs:{data:a[s].defaultValue}},[t._v("\n          "+t._s(t._f("placeholder")(a[s].defaultValue,"-"))+"\n        ")])],1)})}}])},[i("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"flex flex-wrap-reverse items-center"},[i("vs-button",{staticClass:"p-3 mr-4",attrs:{disabled:t.variableFormVisible,color:"primary",type:"filled",icon:"fa-plus","icon-pack":"far"},on:{click:t.showVariableForm}},[t._v(t._s(t.$t("ADD")))]),i("vs-button",{staticClass:"p-3 mr-4",attrs:{type:"filled",icon:"fa-sync","icon-pack":"far",disabled:t.variableTableBusy},on:{click:t.refreshVariableTable}},[t._v(t._s(t.$t("REFRESH")))])],1),i("div",{staticClass:"flex justify-end mr-4"},[i("div",{staticClass:"p-2 border border-solid border-grey-light rounded-full d-theme-dark-bg flex items-center justify-between font-medium"},[i("span",{staticClass:"mx-2"},[t._v(t._s(t.variableTablePagingInfo))]),i("vs-dropdown",{staticClass:"cursor-pointer mr-2",attrs:{"vs-trigger-click":""}},[i("span",{staticClass:"far fa-angle-down text-primary"}),i("vs-dropdown-menu",t._l(t.tablePageOptions,function(e,a){return i("vs-dropdown-item",{key:a,on:{click:function(i){t.variableTablePerPage=e}}},[i("span",[t._v(t._s(e))])])}),1)],1)],1)])]),i("template",{slot:"thead"},[i("vs-th",{attrs:{"sort-key":"variableName"}},[t._v("\n        "+t._s(this.$t("VARIABLE_NAME"))+"\n      ")]),i("vs-th",{attrs:{"sort-key":"variableTypeDescription"}},[t._v("\n        "+t._s(this.$t("VARIABLE_TYPE"))+"\n      ")]),i("vs-th",{attrs:{"sort-key":"defaultValue"}},[t._v("\n        "+t._s(this.$t("DEFAULT_VALUE"))+"\n      ")])],1)],2),i("vs-pagination",{attrs:{total:t.variableTableTotalPages,max:t.maxPaginationItems},model:{value:t.variableTableCurrentPage,callback:function(e){t.variableTableCurrentPage=e},expression:"variableTableCurrentPage"}})],1)},k=[],I=i("a601");function C(t,e,i,a,s,r,o){try{var n=t[r](o),l=n.value}catch(u){return void i(u)}n.done?e(l):Promise.resolve(l).then(a,s)}function x(t){return function(){var e=this,i=arguments;return new Promise(function(a,s){var r=t.apply(e,i);function o(t){C(r,a,s,o,n,"next",t)}function n(t){C(r,a,s,o,n,"throw",t)}o(void 0)})}}var D={name:"workflow-variable",mixins:[d["a"],h["a"],u["a"]],components:{Datepicker:b["a"]},props:{workflowId:{type:String,required:!0}},data:function(){return{variableTableData:[],variableTableFilter:null,variableTableFilterTimer:null,variableTableOrderBy:null,variableTableContainer:"variable-loading-container",variableTableBusy:!1,variableTableTotalRows:0,variableTableCurrentPage:1,variableTablePerPage:10,variableFormVisible:!1,variableName:"",variableTypes:[],variableTypeEnumId:"WF_VAR_TEXT",description:"",defaultValue:""}},computed:{variableTableNoDataText:function(){return this.variableTableBusy?this.$t("LOADING")+" ...":this.$t("NO_DATA_FOUND")},variableTableTotalPages:function(){return Math.ceil(this.variableTableTotalRows/this.variableTablePerPage)},variableTablePagingInfo:function(){return this.pagingInfo(this.variableTableCurrentPage,this.variableTablePerPage,this.variableTableTotalRows)}},methods:{load:function(){var t=x(o.a.mark(function t(){var e;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,I["a"].enumerations({enumTypeId:"WorkflowVariableType",orderByField:"sequenceNum,description"}).then(function(t){e.variableTypes=t.data.enumerationList||[]});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadVariableTableData:function(t){var e=this;this.variableTableBusy=!0,this.variableTableContainer=t||this.variableTableContainer,this.startLoading(this.variableTableContainer),c["a"].workflowVariables({pageIndex:this.variableTableCurrentPage-1,pageSize:this.variableTablePerPage,filter:this.variableTableFilter,orderByField:this.variableTableOrderBy,workflowId:this.workflowId}).then(function(t){e.stopLoading(e.variableTableContainer),e.variableTableTotalRows=t.data.totalRows,e.variableTableData=t.data.workflowVariableList||[],e.variableTableBusy=!1})},refreshVariables:function(){this.refreshVariableTable(),this.variableName="",this.defaultValue="",this.description=""},filterVariableTable:function(t){var e=this;this.variableTableFilter!==t?(clearTimeout(this.variableTableFilterTimer),this.variableTableFilterTimer=setTimeout(function(){e.variableTableFilter=t,e.loadVariableTableData()},"750")):clearTimeout(this.variableTableFilterTimer)},orderVariableTable:function(t,e){this.variableTableOrderBy=(e?"":"-")+t,this.loadVariableTableData()},refreshVariableTable:function(){this.loadVariableTableData()},showVariableForm:function(){this.variableFormVisible=!0},hideVariableForm:function(){this.variableFormVisible=!1},createWorkflowVariable:function(){var t=this;c["a"].createWorkflowVariable({workflowId:this.workflowId,variableName:this.variableName,description:this.description,variableTypeEnumId:this.variableTypeEnumId,defaultValue:this.defaultValue}).then(function(e){t.refreshVariables(),t.hideVariableForm()}).catch(function(e){t.$emit("show-alert","danger",e.response.data.errors)})}},mounted:function(){this.load(),this.loadVariableTableData()},watch:{variableTableCurrentPage:function(){this.loadVariableTableData()},variableTablePerPage:function(){this.loadVariableTableData()}}},S=D,P=Object(w["a"])(S,_,k,!1,null,null,null),$=P.exports;function E(t,e,i,a,s,r,o){try{var n=t[r](o),l=n.value}catch(u){return void i(u)}n.done?e(l):Promise.resolve(l).then(a,s)}function F(t){return function(){var e=this,i=arguments;return new Promise(function(a,s){var r=t.apply(e,i);function o(t){E(r,a,s,o,n,"next",t)}function n(t){E(r,a,s,o,n,"throw",t)}o(void 0)})}}var A={name:"workflow-view",mixins:[n["a"],l["a"],u["a"]],components:{WorkflowInitiator:y,WorkflowVariable:$},data:function(){return{workflowId:this.$route.params.id,workflow:{}}},methods:{load:function(){var t=F(o.a.mark(function t(){var e;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,c["a"].workflows({workflowId:this.workflowId}).then(function(t){e.workflow=t.data.workflowList[0]||{}});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.$router.back()},approve:function(){var t=this;c["a"].approveWorkflow({workflowId:this.workflowId}).then(function(e){t.showSuccessAlert(e.data.messages),t.load()}).catch(function(e){t.showDangerAlert(e.response.data.errors)})},designer:function(){this.$router.push({name:"DesignWorkflow",params:{id:this.$route.params.id}})},modify:function(){this.$router.push({name:"ModifyWorkflow",params:{id:this.$route.params.id}})},duplicate:function(){this.$router.push({name:"DuplicateWorkflow",params:{id:this.$route.params.id}})}},mounted:function(){this.load()}},R=A,G=Object(w["a"])(R,a,s,!1,null,null,null);e["default"]=G.exports},"89b6":function(t,e,i){"use strict";var a={props:{popupRef:{type:String,default:"popup"},active:{type:Boolean,default:!1},title:{type:String,default:null}},data:function(){return{activeInternal:!1}},methods:{selectRow:function(t){this.$emit("select-row",t),this.activeInternal=!1}},watch:{active:function(){this.activeInternal=this.active},activeInternal:function(){this.activeInternal||this.$emit("close")}}};e["a"]=a},"9a2e":function(t,e,i){"use strict";var a={methods:{disabledClass:function(t){return"Y"===t.disabled?"line-through":""}}};e["a"]=a},"9ff0":function(t,e,i){"use strict";var a=i("36ad");e["a"]={workflows:function(t){return Object(a["a"])().get("/s1/commons/workflow",{params:t})},workflowStats:function(t){return Object(a["a"])().get("/s1/commons/workflow/stats",{params:t})},createWorkflow:function(t){return Object(a["a"])().post("/s1/commons/workflow",t)},modifyWorkflow:function(t){return Object(a["a"])().patch("/s1/commons/workflow",t)},approveWorkflow:function(t){return Object(a["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/approve"),t)},duplicateWorkflow:function(t){return Object(a["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/duplicate"),t)},designWorkflow:function(t){return Object(a["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/design"),t)},draftWorkflow:function(t){return Object(a["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/draft"),t)},workflowVariables:function(t){return Object(a["a"])().get("/s1/commons/workflow/".concat(t.workflowId,"/variable"),{params:t})},createWorkflowVariable:function(t){return Object(a["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/variable"),t)},workflowInitiators:function(t){return Object(a["a"])().get("/s1/commons/workflow/".concat(t.workflowId,"/initiator"),{params:t})},createWorkflowInitiator:function(t){return Object(a["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/initiator"),t)},expireWorkflowInitiator:function(t){return Object(a["a"])().delete("/s1/commons/workflow/".concat(t.workflowId,"/initiator"),{params:t})},workflowTasks:function(t){return Object(a["a"])().get("/s1/commons/workflow/task",{params:t})},countWorkflowTasks:function(t){return Object(a["a"])().get("/s1/commons/workflow/task/count",{params:t})},modifyWorkflowTask:function(t){return Object(a["a"])().patch("/s1/commons/workflow/task",t)},workflowTypes:function(t){return Object(a["a"])().get("/s1/commons/workflow/type",{params:t})},workflowTypeServices:function(t){return Object(a["a"])().get("/s1/commons/workflow/type/service",{params:t})},workflowTypeAlertTemplates:function(t){return Object(a["a"])().get("/s1/commons/workflow/type/alertTemplate",{params:t})},draftWorkflows:function(t){return Object(a["a"])().get("/s1/commons/workflow/".concat(t.workflowId,"/draft"),{params:t})},designDraftWorkflow:function(t){return Object(a["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/design/draft"),t)},deleteDraftWorkflow:function(t){return Object(a["a"])().delete("/s1/commons/workflow/".concat(t.workflowId,"/design/draft"),{params:t})}}},a601:function(t,e,i){"use strict";var a=i("36ad");e["a"]={enumerations:function(t){return Object(a["a"])().get("/s1/commons/basic/enumeration",{params:t})}}},d5c2:function(t,e,i){"use strict";var a={props:{suggestRef:{type:String,default:"suggest"},popupRef:{type:String,default:"popup"},lookupTag:{type:Number,default:null},title:{type:String,default:null},displayField:{type:String,required:!0},valueField:{type:String,required:!0},recordValue:{type:String,default:null},recordDisplay:{type:String,default:null},defaultTableFilter:{type:String,default:null}},data:function(){return{popupActive:!1,loading:!1,mutableRecordValue:this.recordValue,mutableRecordDisplay:this.recordDisplay}},methods:{boldenSuggestion:function(t){if(!t)return t;var e=t.suggestion,i=t.query,a=this.$refs[this.suggestRef].displayProperty(e);if(!a)return t;if(!i)return a;var s=i.split(/[\s-_/\\|.]/gm).filter(function(t){return!!t})||[""];return a.replace(new RegExp("(.*?)("+s.join("|")+")(.*?)","gi"),"$1<b>$2</b>$3")},selectRow:function(t){this.mutableRecordValue=t[this.valueField],this.mutableRecordDisplay=t[this.displayField],this.$refs[this.suggestRef].clearSuggestions(),this.$emit("select-record",t,this.lookupTag)},selectSuggestion:function(t){t&&(this.mutableRecordValue=t[this.valueField],this.mutableRecordDisplay=t[this.displayField],this.$emit("select-record",t,this.lookupTag))},clear:function(){this.mutableRecordValue="",this.mutableRecordDisplay="",this.$refs[this.suggestRef].clearSuggestions(),this.$emit("select-record",{},this.lookupTag)}},watch:{recordValue:function(t){this.mutableRecordValue=t},recordDisplay:function(t){this.mutableRecordDisplay=t}}};e["a"]=a},e229:function(t,e,i){"use strict";(function(e){var i={selectionUp:[38],selectionDown:[40],select:[13],hideList:[27],autocomplete:[32,13]},a={input:String,select:Object};function s(t,e){return e.split(".").reduce(function(t,e){return t===Object(t)?t[e]:t},t)}function r(t,e){return o(t,e.keyCode)}function o(t,e){if(t.length<=0)return!1;var i=function(t){return t.some(function(t){return t===e})};return Array.isArray(t[0])?t.some(function(t){return i(t)}):i(t)}var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function l(){}function u(t,e){if(!e)return t&&t.then?t.then(l):Promise.resolve()}function c(t,e){var i=t();return i&&i.then?i.then(e):e(i)}function p(t,e,i){return i?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function f(t){var e=t();if(e&&e.then)return e.then(l)}function d(t,e){try{var i=t()}catch(a){return e(a)}return i&&i.then?i.then(void 0,e):i}function h(t,e){try{var i=t()}catch(a){return e()}return i&&i.then?i.then(e,e):e()}var v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-simple-suggest",class:[t.styles.vueSimpleSuggest,{designed:!t.destyled,focus:t.isInFocus}],on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab"))return null;t.isTabbed=!0}}},[i("div",{ref:"inputSlot",staticClass:"input-wrapper",class:t.styles.inputWrapper,attrs:{role:"combobox","aria-haspopup":"listbox","aria-owns":t.listId,"aria-expanded":t.listShown&&!t.removeList?"true":"false"}},[t._t("default",[i("input",t._b({staticClass:"default-input",class:t.styles.defaultInput,domProps:{value:t.text||""}},"input",t.$attrs,!1))])],2),t._v(" "),i("transition",{attrs:{name:"vue-simple-suggest"}},[t.listShown&&!t.removeList?i("ul",{staticClass:"suggestions",class:t.styles.suggestions,attrs:{id:t.listId,role:"listbox","aria-labelledby":t.listId},on:{mouseenter:function(e){return t.hoverList(!0)},mouseleave:function(e){return t.hoverList(!1)}}},[this.$scopedSlots["misc-item-above"]?i("li",[t._t("misc-item-above",null,{suggestions:t.suggestions,query:t.text})],2):t._e(),t._v(" "),t._l(t.suggestions,function(e,a){return i("li",{key:t.getId(e,a),staticClass:"suggest-item",class:[t.styles.suggestItem,{selected:t.isSelected(e),hover:t.isHovered(e)}],attrs:{role:"option","aria-selected":t.isHovered(e)||t.isSelected(e)?"true":"false",id:t.getId(e,a)},on:{mouseenter:function(i){return t.hover(e,i.target)},mouseleave:function(e){return t.hover(void 0)},click:function(i){return t.suggestionClick(e,i)}}},[t._t("suggestion-item",[i("span",[t._v(t._s(t.displayProperty(e)))])],{autocomplete:function(){return t.setText(t.displayProperty(e))},suggestion:e,query:t.text})],2)}),t._v(" "),this.$scopedSlots["misc-item-below"]?i("li",[t._t("misc-item-below",null,{suggestions:t.suggestions,query:t.text})],2):t._e()],2):t._e()])],1)},staticRenderFns:[],name:"vue-simple-suggest",inheritAttrs:!1,model:{prop:"value",event:"input"},props:{styles:{type:Object,default:function(){return{}}},controls:{type:Object,default:function(){return i}},minLength:{type:Number,default:1},maxSuggestions:{type:Number,default:10},displayAttribute:{type:String,default:"title"},valueAttribute:{type:String,default:"id"},list:{type:[Function,Array],default:function(){return[]}},removeList:{type:Boolean,default:!1},destyled:{type:Boolean,default:!1},preventSubmit:{type:Boolean,default:!0},filterByQuery:{type:Boolean,default:!1},filter:{type:Function,default:function(t,e){return!e||~this.displayProperty(t).toLowerCase().indexOf(e.toLowerCase())}},debounce:{type:Number,default:0},nullableSelect:{type:Boolean,default:!1},value:{},mode:{type:String,default:"input",validator:function(t){return!!~Object.keys(a).indexOf(t.toLowerCase())}}},watch:{mode:{handler:function(t,e){var i=this;this.constructor.options.model.event=t,this.$parent&&this.$parent.$forceUpdate(),this.$nextTick(function(){"input"===t?i.$emit("input",i.text):i.$emit("select",i.selected)})},immediate:!0},value:{handler:function(t){"string"===typeof t?this.text=t:t&&(this.text=this.displayProperty(t))},immediate:!0}},data:function(){return{selected:null,hovered:null,suggestions:[],listShown:!1,inputElement:null,canSend:!0,timeoutInstance:null,text:this.value,isPlainSuggestion:!1,isClicking:!1,isOverList:!1,isInFocus:!1,isFalseFocus:!1,isTabbed:!1,controlScheme:{},listId:this._uid+"-suggestions"}},computed:{listIsRequest:function(){return"function"===typeof this.list},inputIsComponent:function(){return this.$slots.default&&this.$slots.default.length>0&&!!this.$slots.default[0].componentInstance},input:function(){return this.inputIsComponent?this.$slots.default[0].componentInstance:this.inputElement},on:function(){return this.inputIsComponent?"$on":"addEventListener"},off:function(){return this.inputIsComponent?"$off":"removeEventListener"},hoveredIndex:function(){var t=this;return this.suggestions.findIndex(function(e){return t.hovered&&t.valueProperty(t.hovered)==t.valueProperty(e)})},textLength:function(){return this.text&&this.text.length||this.inputElement.value.length||0},isSelectedUpToDate:function(){return!!this.selected&&this.displayProperty(this.selected)===this.text}},created:function(){this.controlScheme=Object.assign({},i,this.controls)},mounted:function(){this.inputElement=this.$refs["inputSlot"].querySelector("input"),this.setInputAriaAttributes(),this.prepareEventHandlers(!0)},beforeDestroy:function(){this.prepareEventHandlers(!1)},methods:{isEqual:function(t,e){return e&&this.valueProperty(t)==this.valueProperty(e)},isSelected:function(t){return this.isEqual(t,this.selected)},isHovered:function(t){return this.isEqual(t,this.hovered)},setInputAriaAttributes:function(){this.inputElement.setAttribute("aria-activedescendant",""),this.inputElement.setAttribute("aria-autocomplete","list"),this.inputElement.setAttribute("aria-controls",this.listId)},prepareEventHandlers:function(t){var e=this[t?"on":"off"],i={click:this.showSuggestions,keydown:this.onKeyDown,keyup:this.onListKeyUp},a=Object.assign({blur:this.onBlur,focus:this.onFocus,input:this.onInput},i);for(var s in a)this.input[e](s,a[s]);var r=t?"addEventListener":"removeEventListener";for(var o in i)this.inputElement[r](o,i[o])},isScopedSlotEmpty:function(t){if(t){var e=t(this);return!(Array.isArray(e)||e&&(e.tag||e.context||e.text||e.children))}return!0},miscSlotsAreEmpty:function(){var t=this,e=["misc-item-above","misc-item-below"].map(function(e){return t.$scopedSlots[e]});if(e.every(function(t){return!!t}))return e.every(this.isScopedSlotEmpty.bind(this));var i=e.find(function(t){return!!t});return this.isScopedSlotEmpty.call(this,i)},getPropertyByAttribute:function(t,e){return this.isPlainSuggestion?t:void 0!==("undefined"===typeof t?"undefined":n(t))?s(t,e):t},displayProperty:function(t){if(this.isPlainSuggestion)return t;var i=this.getPropertyByAttribute(t,this.displayAttribute);return"undefined"===typeof i&&(i=JSON.stringify(t),e&&~"production".indexOf("dev")&&console.warn("[vue-simple-suggest]: Please, provide `display-attribute` as a key or a dotted path for a property from your object.")),String(i)},valueProperty:function(t){if(this.isPlainSuggestion)return t;var e=this.getPropertyByAttribute(t,this.valueAttribute);return"undefined"===typeof e&&console.error("[vue-simple-suggest]: Please, check if you passed 'value-attribute' (default is 'id') and 'display-attribute' (default is 'title') props correctly.\n        Your list objects should always contain a unique identifier."),e},autocompleteText:function(t){this.setText(t)},setText:function(t){var e=this;this.$nextTick(function(){e.$emit("input",t),e.inputElement.value=t,e.text=t})},select:function(t){(this.selected!==t||this.nullableSelect&&!t)&&(this.selected=t,this.$emit("select",t),t&&this.setText(this.displayProperty(t))),this.hover(null)},hover:function(t,e){var i=t?this.getId(t,this.hoveredIndex):"";this.inputElement.setAttribute("aria-activedescendant",i),t&&t!==this.hovered&&this.$emit("hover",t,e),this.hovered=t},hoverList:function(t){this.isOverList=t},hideList:function(){this.listShown&&(this.listShown=!1,this.hover(null),this.$emit("hide-list"))},showList:function(){this.listShown||this.textLength>=this.minLength&&(this.suggestions.length>0||!this.miscSlotsAreEmpty())&&(this.listShown=!0,this.$emit("show-list"))},showSuggestions:function(){try{var t=this;return c(function(){if(0===t.suggestions.length&&t.minLength===t.textLength)return u(t.research())},function(){t.showList()})}catch(e){return Promise.reject(e)}},moveSelection:function(t){if(this.listShown&&this.suggestions.length&&r([this.controlScheme.selectionUp,this.controlScheme.selectionDown],t)){t.preventDefault(),this.showSuggestions();var e=r(this.controlScheme.selectionDown,t),i=2*e-1,a=e?0:this.suggestions.length-1,s=e?this.hoveredIndex<this.suggestions.length-1:this.hoveredIndex>0,o=null;o=this.hovered?s?this.suggestions[this.hoveredIndex+i]:this.suggestions[a]:this.selected||this.suggestions[a],this.hover(o)}},onKeyDown:function(t){var e=this.controlScheme.select,i=this.controlScheme.hideList;this.preventSubmit&&"Enter"===t.key&&o([e,i],13)&&t.preventDefault(),this.moveSelection(t),this.onAutocomplete(t)},onListKeyUp:function(t){var e=this.controlScheme.select,i=this.controlScheme.hideList;r([e,i],t)&&(t.preventDefault(),this.listShown?(r(e,t)&&this.select(this.hovered),this.hideList()):r(e,t)&&this.research())},onAutocomplete:function(t){r(this.controlScheme.autocomplete,t)&&(t.ctrlKey||t.shiftKey)&&this.suggestions.length>0&&this.suggestions[0]&&this.listShown&&(t.preventDefault(),this.hover(this.suggestions[0]),this.setText(this.displayProperty(this.suggestions[0])))},suggestionClick:function(t,e){var i=this;this.$emit("suggestion-click",t,e),this.select(t),this.isClicking=this.isOverList=!1,this.$nextTick(function(){i.hideList()})},onBlur:function(t){var e=this;this.isInFocus?(this.isClicking=this.isOverList&&!this.isTabbed,this.isClicking?t&&t.isTrusted&&!this.isTabbed&&(this.isFalseFocus=!0,this.$nextTick(function(){e.inputElement.focus()})):(this.isInFocus=!1,this.hideList(),this.$emit("blur",t))):(this.inputElement.blur(),console.error("This should never happen!\n          If you encountered this error, please make sure that your input component emits 'focus' events properly.\n          For more info see https://github.com/KazanExpress/vue-simple-suggest#custom-input.\n\n          If your 'vue-simple-suggest' setup does not include a custom input component - please,\n          report to https://github.com/KazanExpress/vue-simple-suggest/issues/new")),this.isTabbed=!1},onFocus:function(t){this.isInFocus=!0,t&&!this.isFalseFocus&&this.$emit("focus",t),this.isFalseFocus=!1,this.isClicking||this.showSuggestions()},onInput:function(t){var e=t.target?t.target.value:t;this.text!==e&&(this.text=e,this.$emit("input",this.text),this.hovered&&this.hover(null),this.debounce?(clearTimeout(this.timeoutInstance),this.timeoutInstance=setTimeout(this.research,this.debounce)):this.research())},research:function(){try{var t=this;return h(function(){return d(function(){return f(function(){if(t.canSend){t.canSend=!1;var e=t.text;return p(t.getSuggestions(t.text),function(i){e===t.text&&t.$set(t,"suggestions",i)})}})},function(e){throw t.clearSuggestions(),e})},function(){return t.canSend=!0,0===t.suggestions.length&&t.miscSlotsAreEmpty()?t.hideList():t.showList(),t.suggestions})}catch(e){return Promise.reject(e)}},getSuggestions:function(t){try{var e=this;if(t=t||"",t.length<e.minLength)return e.listShown?(e.hideList(),[]):e.suggestions;e.selected=null,e.listIsRequest&&(e.$emit("request-start",t),(e.suggestions.length>0||!e.miscSlotsAreEmpty())&&e.showList());var i=[];return h(function(){return d(function(){return c(function(){if(e.listIsRequest)return p(e.list(t),function(t){i=t||[]});i=e.list},function(){Array.isArray(i)||(i=[i]),e.isPlainSuggestion="object"!==n(i[0])||Array.isArray(i[0]),e.filterByQuery&&(i=i.filter(function(i){return e.filter(i,t)})),e.listIsRequest&&e.$emit("request-done",i)})},function(t){if(!e.listIsRequest)throw t;e.$emit("request-failed",t)})},function(){return e.maxSuggestions&&i.splice(e.maxSuggestions),i})}catch(a){return Promise.reject(a)}},clearSuggestions:function(){this.suggestions.splice(0)},getId:function(t,e){return this.listId+"-suggestion-"+(this.isPlainSuggestion?e:this.valueProperty(t)||e)}}};t.exports=v}).call(this,i("2820"))}}]);
//# sourceMappingURL=chunk-bfb83954.af460cad.js.map