(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39a6c7e4"],{7482:function(t,s,a){"use strict";var o=a("36ad");s["a"]={statusFlows:function(t){return Object(o["a"])().get("/s1/commons/basic/status/flow",{params:t})},statusFlowItems:function(t){return Object(o["a"])().get("/s1/commons/basic/status/flow/".concat(t.statusFlowId,"/item"),{params:t})},createStatusFlowItem:function(t){return Object(o["a"])().post("/s1/commons/basic/status/flow/".concat(t.statusFlowId,"/item"),t)},initialStatusFlowItem:function(t){return Object(o["a"])().patch("/s1/commons/basic/status/flow/".concat(t.statusFlowId,"/item"),t)},deleteStatusFlowItem:function(t){return Object(o["a"])().delete("/s1/commons/basic/status/flow/".concat(t.statusFlowId,"/item"),{params:t})},statusFlowTransitions:function(t){return Object(o["a"])().get("/s1/commons/basic/status/flow/".concat(t.statusFlowId,"/transition"),{params:t})},createStatusFlowTransition:function(t){return Object(o["a"])().post("/s1/commons/basic/status/flow/".concat(t.statusFlowId,"/transition"),t)},deleteStatusFlowTransition:function(t){return Object(o["a"])().delete("/s1/commons/basic/status/flow/".concat(t.statusFlowId,"/transition"),{params:t})}}},"946b":function(t,s,a){"use strict";var o={data:function(){return{alertActive:!1,alertMessage:this.$t("UNKNOWN_ERROR"),alertVariant:"danger"}},methods:{showAlert:function(t,s){this.alertMessage=s||this.$t("UNKNOWN_ERROR"),this.alertVariant=t,this.alertActive=!0},showSuccessAlert:function(t){this.showAlert("success",t)},showDangerAlert:function(t){this.showAlert("danger",t)},showWarningAlert:function(t){this.showAlert("warning",t)},showInfoAlert:function(t){this.showAlert("info",t)}}};s["a"]=o},"9a2e":function(t,s,a){"use strict";var o={methods:{disabledClass:function(t){return"Y"===t.disabled?"line-through":""}}};s["a"]=o},"9ff0":function(t,s,a){"use strict";var o=a("36ad");s["a"]={workflows:function(t){return Object(o["a"])().get("/s1/commons/workflow",{params:t})},workflowStats:function(t){return Object(o["a"])().get("/s1/commons/workflow/stats",{params:t})},createWorkflow:function(t){return Object(o["a"])().post("/s1/commons/workflow",t)},modifyWorkflow:function(t){return Object(o["a"])().patch("/s1/commons/workflow",t)},approveWorkflow:function(t){return Object(o["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/approve"),t)},duplicateWorkflow:function(t){return Object(o["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/duplicate"),t)},designWorkflow:function(t){return Object(o["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/design"),t)},draftWorkflow:function(t){return Object(o["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/draft"),t)},workflowVariables:function(t){return Object(o["a"])().get("/s1/commons/workflow/".concat(t.workflowId,"/variable"),{params:t})},createWorkflowVariable:function(t){return Object(o["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/variable"),t)},workflowInitiators:function(t){return Object(o["a"])().get("/s1/commons/workflow/".concat(t.workflowId,"/initiator"),{params:t})},createWorkflowInitiator:function(t){return Object(o["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/initiator"),t)},expireWorkflowInitiator:function(t){return Object(o["a"])().delete("/s1/commons/workflow/".concat(t.workflowId,"/initiator"),{params:t})},workflowTasks:function(t){return Object(o["a"])().get("/s1/commons/workflow/task",{params:t})},countWorkflowTasks:function(t){return Object(o["a"])().get("/s1/commons/workflow/task/count",{params:t})},modifyWorkflowTask:function(t){return Object(o["a"])().patch("/s1/commons/workflow/task",t)},workflowTypes:function(t){return Object(o["a"])().get("/s1/commons/workflow/type",{params:t})},workflowTypeServices:function(t){return Object(o["a"])().get("/s1/commons/workflow/type/service",{params:t})},workflowTypeAlertTemplates:function(t){return Object(o["a"])().get("/s1/commons/workflow/type/alertTemplate",{params:t})},draftWorkflows:function(t){return Object(o["a"])().get("/s1/commons/workflow/".concat(t.workflowId,"/draft"),{params:t})},designDraftWorkflow:function(t){return Object(o["a"])().post("/s1/commons/workflow/".concat(t.workflowId,"/design/draft"),t)},deleteDraftWorkflow:function(t){return Object(o["a"])().delete("/s1/commons/workflow/".concat(t.workflowId,"/design/draft"),{params:t})}}},a03a:function(t,s,a){"use strict";a.r(s);var o=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[t.alertActive?a("div",{staticClass:"alert-container"},[a("vs-alert",{staticClass:"mb-5",attrs:{active:t.alertActive,color:t.alertVariant,closable:"","icon-pack":"feather","close-icon":"icon-x"},on:{"update:active":function(s){t.alertActive=s}}},[a("p",[t._v(t._s(t.alertMessage))])])],1):t._e(),a("nv-card",{staticClass:"vs-con-loading__container mb-base",attrs:{id:"loading-container"}},[a("div",{staticClass:"flex flex-wrap-reverse items-center mb-base"},[a("vs-button",{staticClass:"p-3 mr-4",attrs:{color:"primary",type:"filled",icon:"fa-chevron-left","icon-pack":"far"},on:{click:t.cancel}},[t._v(t._s(t.$t("BACK")))]),t._l(t.transitions,function(s){return[a("vs-button",{key:s.toStatusId,staticClass:"p-3 mr-4",attrs:{disabled:t.statusId,color:t.transitionButtonVariant(s)},on:{click:function(a){return t.selectTransition(s)}}},[t._v("\n          "+t._s(s.transitionName)+"\n        ")])]})],2),t.statusId?a("div",{staticClass:"inline-form p-4 mb-4"},[a("form",{on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.modifyWorkflowTask(s)}}},[t.task.variableId?a("div",{staticClass:"nv-row mb-4"},[a("div",{staticClass:"nv-col w-full"},[a("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("VALUE")))]),"WF_VAR_NUMBER"===t.task.variableTypeEnumId?a("vs-input",{staticClass:"w-full",attrs:{type:"number"},model:{value:t.definedValue,callback:function(s){t.definedValue=s},expression:"definedValue"}}):a("vs-input",{staticClass:"w-full",model:{value:t.definedValue,callback:function(s){t.definedValue=s},expression:"definedValue"}})],1)]):t._e(),a("div",{staticClass:"nv-row mb-4"},[a("div",{staticClass:"nv-col w-full"},[a("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("COMMENTS")))]),a("vs-textarea",{staticClass:"w-full",model:{value:t.comments,callback:function(s){t.comments=s},expression:"comments"}})],1)]),"EMAIL"===t.workflowTaskAuth||"SMS"===t.workflowTaskAuth?a("div",{staticClass:"nv-row mb-4"},[a("div",{staticClass:"nv-col w-full required"},[a("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("ONE_TIME_PASSWORD")))]),a("vs-input",{ref:"password",staticClass:"w-full",model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1)]):t._e(),"PWD"===t.workflowTaskAuth?a("div",{staticClass:"nv-row mb-4"},[a("div",{staticClass:"nv-col w-full required"},[a("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$t("PASSWORD")))]),a("password",{staticClass:"w-full",attrs:{placeholder:"",toggle:!0,badge:!1,showStrengthMeter:!1,autocomplete:"off"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1)]):t._e(),a("div",{staticClass:"nv-row"},[a("div",{staticClass:"nv-col sm:w-1/2 w-full"},[a("div",{staticClass:"flex justify-left"},[a("vs-button",{staticClass:"px-5 py-3 mr-2",attrs:{color:"primary",type:"filled"},on:{click:t.modifyWorkflowTask}},[t._v(t._s(t.$t("SUBMIT")))]),a("vs-button",{staticClass:"px-5 py-3 mr-2",attrs:{color:"primary",type:"border"},on:{click:function(s){t.statusId=null}}},[t._v(t._s(t.$t("CANCEL")))])],1)])])])]):t._e(),a("div",{staticClass:"nv-row row hover"},[a("div",{staticClass:"nv-col w-full"},[a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("ID"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.taskId,"-")))])]),a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("WORKFLOW_NAME"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.workflowName,"-")))])]),a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("TASK_TYPE"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.taskTypeDescription,"-")))])]),a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("ACTION_TYPE"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.actionTypeDescription,"-")))])]),a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("STATUS"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.statusDescription,"-")))])]),a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("CREATION_DATE"))+": ")]),a("span",[t._v(t._s(t._f("formatUnixDate")(t.task.creationDate)))])]),t.task.instanceTimeoutDate?a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("DUE_DATE"))+": ")]),a("span",[t._v(t._s(t._f("formatUnixDate")(t.task.instanceTimeoutDate)))])]):t._e(),t.task.variableName?a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("VARIABLE_NAME"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.variableName,"-")))])]):t._e(),t.task.variableDescription?a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("DESCRIPTION"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.variableDescription,"-")))])]):t._e(),t.task.variableDefinedValue?a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("VALUE"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.variableDefinedValue,"-")))])]):t._e(),t.task.summary?a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("SUMMARY"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.summary,"-")))])]):t._e(),t.task.description?a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("DESCRIPTION"))+": ")]),a("span",[t._v(t._s(t._f("placeholder")(t.task.description,"-")))])]):t._e(),t.task.creationDate?a("p",{staticClass:"info-row"},[a("span",[t._v(t._s(t.$t("CREATION_DATE"))+": ")]),a("span",[t._v(t._s(t._f("formatUnixDate")(t.task.creationDate)))])]):t._e()])])])],1)},n=[],e=a("a34a"),r=a.n(e),i=a("946b"),c=a("9a2e"),l=a("93b8"),u=a("b664"),f=a("a601"),w=a("19e6"),d=a("9ff0"),p=a("7482");function m(t,s,a,o,n,e,r){try{var i=t[e](r),c=i.value}catch(l){return void a(l)}i.done?s(c):Promise.resolve(c).then(o,n)}function k(t){return function(){var s=this,a=arguments;return new Promise(function(o,n){var e=t.apply(s,a);function r(t){m(e,o,n,r,i,"next",t)}function i(t){m(e,o,n,r,i,"throw",t)}r(void 0)})}}var v={name:"workflow-task-view",mixins:[u["a"],c["a"],i["a"],l["a"]],data:function(){return{task:{},workflowTaskAuth:"SMS",transitions:[],statusId:null,definedValue:"",comments:"",password:""}},methods:{load:function(){var t=k(r.a.mark(function t(){var s;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:s=this,f["a"].enumerations({enumTypeId:"WorkflowVariableType",orderByField:"sequenceNum,description"}).then(function(t){s.stopLoading("loading-container"),s.variableTypes=t.data.enumerationList||[]}),this.startLoading("loading-container"),d["a"].workflowTasks({taskId:this.$route.params.id}).then(function(t){s.task=t.data.taskList[0]||{},s.loadTransitions()});case 4:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}(),loadTransitions:function(){var t=this;p["a"].statusFlowTransitions({statusFlowId:"WorkflowTaskStatusFlow",fromStatusId:this.task.statusId,conditionExpression:this.task.taskTypeEnumId,orderByField:"transitionSequence"}).then(function(s){t.transitions=s.data.transitionList||[]})},transitionButtonVariant:function(t){return"WF_TASK_APPROVE"===t.toStatusId||"WF_TASK_DONE"===t.toStatusId?"success":"WF_TASK_REJECT"===t.toStatusId?"danger":"primary"},selectTransition:function(t){if(this.statusId=t.toStatusId,"EMAIL"===this.workflowTaskAuth||"SMS"===this.workflowTaskAuth){var s=this,a="Email"===this.workflowTaskAuth,o="SMS"===this.workflowTaskAuth;this.startLoading("loading-container"),w["a"].generateOneTimePassword({sendEmail:a,sendSms:o}).then(function(t){s.stopLoading("loading-container"),s.$refs.password.$el.childNodes[1].childNodes[0].focus()}).catch(function(t){s.stopLoading("loading-container"),s.showDangerAlert(t.response.data.errors)})}},modifyWorkflowTask:function(){var t=this;this.startLoading("loading-container"),d["a"].modifyWorkflowTask({taskId:this.$route.params.id,statusId:this.statusId,definedValue:this.definedValue,comments:this.comments,password:this.password}).then(function(s){t.stopLoading("loading-container"),200===s.status&&(t.statusId=null,t.comments="",t.password="",t.load())}).catch(function(s){t.stopLoading("loading-container"),t.showDangerAlert(s.response.data.errors)})},cancel:function(){this.$router.back()}},mounted:function(){this.load()}},_=v,b=a("2877"),h=Object(b["a"])(_,o,n,!1,null,null,null);s["default"]=h.exports},a601:function(t,s,a){"use strict";var o=a("36ad");s["a"]={enumerations:function(t){return Object(o["a"])().get("/s1/commons/basic/enumeration",{params:t})}}}}]);
//# sourceMappingURL=chunk-39a6c7e4.d5210b7c.js.map